<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<div class="toolbar">
  <h2>Departamentos</h2>
  <button pButton label="Novo Departamento" icon="pi pi-plus" class="p-button-success" (click)="novo()"></button>
</div>

<p-table [value]="departamentos" [paginator]="true" [rows]="10" [loading]="carregando"
         styleClass="p-datatable-sm p-datatable-striped">
  <ng-template pTemplate="header">
    <tr>
      <th>Nome</th>
      <th>Sigla</th>
      <th>Status</th>
      <th style="width: 220px;">Ações</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-d>
    <tr>
      <td>{{ d.nome }}</td>
      <td>{{ d.sigla }}</td>
      <td>
        <p-tag [severity]="d.ativo ? 'success' : 'danger'" [value]="d.ativo ? 'Ativo' : 'Inativo'"></p-tag>
      </td>
      <td>
        <button pButton icon="pi pi-pencil" class="p-button-sm p-button-info" (click)="editar(d.id)" pTooltip="Editar"></button>
        <button pButton icon="pi pi-ban" class="p-button-sm p-button-danger" (click)="confirmarInativacao(d)" [disabled]="!d.ativo" pTooltip="Inativar"></button>
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="4">Nenhum departamento encontrado.</td>
    </tr>
  </ng-template>
</p-table>

<div class="summary" *ngIf="departamentos.length">
  Total: {{ departamentos.length }}
</div>

<style>
  .toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
  .summary { margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8; }
  p-table button { margin-right: 0.5rem; }
</style>
